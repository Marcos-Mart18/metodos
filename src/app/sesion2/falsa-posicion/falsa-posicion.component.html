<div>
  <a
    routerLink="/sesion2"
    class="inline-flex items-center gap-2 bg-gradient-to-b from-[#001C48] to-[#003366] text-white font-bold text-sm px-4 py-2 rounded-lg shadow-md hover:shadow-lg hover:from-[#003366] hover:to-[#004080] hover:-translate-y-0.5 transition"
  >
    <!-- SVG flecha -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-5 h-5"
      viewBox="0 0 24 24"
      fill="currentColor"
    >
      <g data-name="Layer 2">
        <g data-name="arrow-back">
          <rect
            width="24"
            height="24"
            transform="rotate(90 12 12)"
            opacity="0"
          ></rect>
          <path
            d="M19 11H7.14l3.63-4.36a1 1 0 1 0-1.54-1.28l-5 6a1.19 1.19 0 0 0-.09.15c0 .05 0 .08-.07.13A1 1 0 0 0 4 12a1 1 0 0 0 .07.36c0 .05 0 .08.07.13a1.19 1.19 0 0 0 .09.15l5 6A1 1 0 0 0 10 19a1 1 0 0 0 .64-.23 1 1 0 0 0 .13-1.41L7.14 13H19a1 1 0 0 0 0-2z"
          ></path>
        </g>
      </g>
    </svg>
    <span>Volver</span>
  </a>
</div>

<!-- Contenedor principal en dos columnas -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto mt-6 px-4">
  <!-- Bloque izquierdo: Configuración e iteraciones -->
  <div class="p-6 bg-white rounded-2xl shadow-lg border border-gray-200">
    <h2 class="text-xl font-bold mb-4 text-[#001C48]">
      Método de Falsa Posición
    </h2>

    <!-- Inputs -->
    <form (ngSubmit)="calcular()" #fpForm="ngForm" class="grid gap-3">
      <div>
        <label class="block text-sm font-medium text-[#001C48]"
          >Ecuación f(x)</label
        >
        <input
          type="text"
          [(ngModel)]="ecuacion"
          name="ecuacion"
          required
          class="w-full p-2 rounded bg-gray-100 text-[#001C48] border border-gray-300 focus:ring-2 focus:ring-[#3BAFDA] focus:outline-none"
          placeholder="Ej: x**3 - 30"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-[#001C48]"
          >Límite inferior (a)</label
        >
        <input
          type="number"
          [(ngModel)]="a"
          name="a"
          required
          class="w-full p-2 rounded bg-gray-100 text-[#001C48] border border-gray-300"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-[#001C48]"
          >Límite superior (b)</label
        >
        <input
          type="number"
          [(ngModel)]="b"
          name="b"
          required
          class="w-full p-2 rounded bg-gray-100 text-[#001C48] border border-gray-300"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-[#001C48]"
          >Tolerancia</label
        >
        <input
          type="number"
          [(ngModel)]="tol"
          name="tol"
          required
          class="w-full p-2 rounded bg-gray-100 text-[#001C48] border border-gray-300"
        />
      </div>
      <button
        type="submit"
        class="items-center gap-2 bg-gradient-to-b from-[#001C48] to-[#003366] text-white font-bold text-sm px-4 py-2 rounded-lg shadow-md hover:shadow-lg hover:from-[#003366] hover:to-[#004080] hover:-translate-y-0.5 transition"
      >
        Calcular
      </button>
    </form>
    <!-- Mensaje de error -->
    <div
      *ngIf="mensajeError"
      class="mt-3 p-3 rounded-lg bg-red-100 text-red-800 border border-red-300"
    >
      {{ mensajeError }}
    </div>

    <!-- Resultado -->
    <div
      *ngIf="!mensajeError && raiz !== null"
      class="mt-4 p-3 bg-green-100 text-green-800 border border-green-300 rounded-lg"
    >
      Raíz aproximada: <b>{{ raiz | cientifico : 6 }}</b>
    </div>

    <!-- Tabla de iteraciones -->
    <div class="overflow-x-auto mt-4" *ngIf="iteraciones.length > 0">
      <table class="w-full border-collapse border border-gray-300 text-sm">
        <thead class="bg-gray-100">
          <tr>
            <th class="border p-1">Iter</th>
            <th class="border p-1">a</th>
            <th class="border p-1">f(a)</th>
            <th class="border p-1">b</th>
            <th class="border p-1">f(b)</th>
            <th class="border p-1">xr</th>
            <th class="border p-1">f(xr)</th>
            <th class="border p-1">f(a)*f(xr)</th>
            <th class="border p-1">Error (%)</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let it of iteraciones">
            <td class="border p-1">{{ it.i }}</td>
            <td class="border p-1">{{ it.a | cientifico : 6 }}</td>
            <td class="border p-1">{{ it.fa | cientifico : 6 }}</td>
            <td class="border p-1">{{ it.b | cientifico : 6 }}</td>
            <td class="border p-1">{{ it.fb | cientifico : 6 }}</td>
            <td class="border p-1">{{ it.xr | cientifico : 6 }}</td>
            <td class="border p-1">{{ it.fxr | cientifico : 6 }}</td>
            <td class="border p-1">{{ it.signo }}</td>
            <td class="border p-1">{{ it.error | cientifico : 3 }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Bloque derecho: Gráfico -->
  <div class="p-6 bg-white rounded-2xl shadow-lg border border-gray-200">
    <h3 class="text-xl font-bold mb-4 text-[#001C48]">Gráfico de f(x)</h3>
    <canvas
      baseChart
      [data]="chartData"
      [options]="chartOptions"
      [type]="'line'"
    >
    </canvas>
  </div>
</div>
